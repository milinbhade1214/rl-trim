#!/bin/bash
#SBATCH --job-name=Llama_AMC_train# Job name
#SBATCH --ntasks=8 # Run on a single CPU
#SBATCH --time=24:00:00 # Time limit hrs:min:sec
#SBATCH --output=AMC_export_LLama%j.out # Standard output and error log

cuda_device=7
RATIO=0.8
# # Set CUDA device visibility
export CUDA_VISIBLE_DEVICES=$cuda_device

python amc_search.py \
    --job=export \
    --model=Llama-2-7b-hf \
    --dataset=wikitext \
    --data_root=./dataset \
    --ckpt_path=./checkpoint \
    --seed=2018 \
    --n_worker=32 \
    --preserve_ratio=$RATIO \
    --pr_ratio=$RATIO \
    --lbound=0.7 \
    --rbound=1.0 \
    --ratios=1.0,0.9548510174418605,0.9375,0.9377725290697675,0.96875,0.9365915697674418,1.0,0.9952761627906976,0.9375,0.9606649709302325,1.0,0.9909156976744186,0.9375,0.9319585755813954,0.9375,0.9294149709302325,0.96875,0.979469476744186,0.8125,0.974109738372093,1.0,0.9912790697674418,0.6875,0.7000363372093024,0.6875,0.7000363372093024,0.6875,0.7000363372093024,0.6875,0.7013081395348837,0.6875,0.7089389534883721,0.6875,0.7057594476744186,0.6875,0.70703125,0.6875,0.7064861918604651,0.6875,0.7067587209302325,0.6875,0.7066678779069767,0.6875,0.7066678779069767,0.6875,0.7066678779069767,0.6875,0.7066678779069767,0.6875,0.7066678779069767,0.6875,0.7066678779069767,0.6875,0.7066678779069767 \
    --model_path=/data/home/milinbhade/LLaMa/hf_llama \
    --tokenizer_path=/data/home/milinbhade/LLaMa/hf_llama \
    --export_path=./exported_models/ \
    --export_num=2613 \
    

## 2496=> 0.96875,0.9992732558139535,1.0,0.928688226744186,1.0,0.9968204941860465,0.9375,0.9981831395348837,1.0,0.9922783430232558,1.0,0.9994549418604651,0.9375,0.9543968023255814,0.96875,0.9614825581395349,0.96875,0.962390988372093,1.0,0.9942768895348837,0.9375,0.5786700581395349,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5

## 2526 => 0.875,0.5,0.875,0.5,0.75,0.8144077034883721,0.71875,0.5,0.96875,0.5663154069767442,0.9375,0.5,0.78125,0.5,0.96875,0.5,0.9375,0.5,0.78125,0.5,0.875,0.5,0.59375,0.5618640988372093,0.96875,0.5006359011627907,0.96875,0.5,0.9375,0.5,0.90625,0.5,0.84375,0.5,0.75,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5